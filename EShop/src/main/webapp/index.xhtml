<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="content">
                <h:panelGroup id="messagePanel" layout="block">
                    <h:messages fatalClass="alert alert-danger" errorClass="alert alert-danger" 
                                warnClass="alert alert-warning" infoClass="alert alert-success" layout="list"/>
                </h:panelGroup>
                <ul class="book-list">
                    <ui:repeat value="#{bookstore.books}" var="currentBook">
                        <li class="book row">
                            <h:graphicImage class="title-page-image col-xs-12 col-sm-4 col-md-3 col-lg-2 img-responsive"
                                            alt="Book title page image"
                                            value="#{(currentBook.photoUrl != null)? currentBook.photoUrl : '/resources/img/book.png'}">
                            </h:graphicImage>     
                            <div class="book-data col-xs-12 col-sm-8 col-md-9 col-lg-10">
                                <h3>
                                    <a href="#{currentBook.bookUrl}" target="_blank">
                                        <h:outputText escape="true" value="#{currentBook.title}" />
                                    </a>
                                </h3>
                                <div class="price">
                                    Price: <h:outputText escape="true" value="$#{currentBook.price}" /> 
                                </div>

                                <div class="authors">
                                    <ui:repeat value="#{currentBook.authors}" var="author" varStatus="authorSatus">
                                        <span>
                                            <h:outputText escape="true" value="#{author}#{ (!authorSatus.last) ? ', ' : '' }" />
                                        </span>
                                    </ui:repeat>
                                </div>
                                <div class="isbn">
                                    ISBN: <h:outputText escape="true" value="#{currentBook.isbn}" /> 
                                </div>
                                <div class='description'>
                                    <h:outputText escape="true" value="#{currentBook.description}" /> 
                                </div>
                            </div>
                        </li>
                    </ui:repeat>
                </ul>
            </ui:define>

        </ui:composition>

    </body>
</html>
